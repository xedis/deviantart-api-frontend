(()=>{var e={};e.id=888,e.ids=[888],e.modules={7544:(e,t,r)=>{r(3802)},3802:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return u}});let n=r(167),o=r(997),i=n._(r(6689)),s=r(9903);async function a(e){let{Component:t,ctx:r}=e;return{pageProps:await (0,s.loadGetInitialProps)(t,r)}}class u extends i.default.Component{render(){let{Component:e,pageProps:t}=this.props;return(0,o.jsx)(e,{...t})}}u.origGetInitialProps=a,u.getInitialProps=a,("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},9903:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{DecodeError:function(){return g},MiddlewareNotFoundError:function(){return w},MissingStaticPage:function(){return y},NormalizeError:function(){return m},PageNotFoundError:function(){return h},SP:function(){return f},ST:function(){return p},WEB_VITALS:function(){return r},execOnce:function(){return n},getDisplayName:function(){return u},getLocationOrigin:function(){return s},getURL:function(){return a},isAbsoluteUrl:function(){return i},isResSent:function(){return c},loadGetInitialProps:function(){return d},normalizeRepeatedSlashes:function(){return l},stringifyError:function(){return x}});let r=["CLS","FCP","FID","INP","LCP","TTFB"];function n(e){let t,r=!1;return function(){for(var n=arguments.length,o=Array(n),i=0;i<n;i++)o[i]=arguments[i];return r||(r=!0,t=e(...o)),t}}let o=/^[a-zA-Z][a-zA-Z\d+\-.]*?:/,i=e=>o.test(e);function s(){let{protocol:e,hostname:t,port:r}=window.location;return e+"//"+t+(r?":"+r:"")}function a(){let{href:e}=window.location,t=s();return e.substring(t.length)}function u(e){return"string"==typeof e?e:e.displayName||e.name||"Unknown"}function c(e){return e.finished||e.headersSent}function l(e){let t=e.split("?");return t[0].replace(/\\/g,"/").replace(/\/\/+/g,"/")+(t[1]?"?"+t.slice(1).join("?"):"")}async function d(e,t){let r=t.res||t.ctx&&t.ctx.res;if(!e.getInitialProps)return t.ctx&&t.Component?{pageProps:await d(t.Component,t.ctx)}:{};let n=await e.getInitialProps(t);if(r&&c(r))return n;if(!n)throw Error('"'+u(e)+'.getInitialProps()" should resolve to an object. But found "'+n+'" instead.');return n}let f="undefined"!=typeof performance,p=f&&["mark","measure","getEntriesByName"].every(e=>"function"==typeof performance[e]);class g extends Error{}class m extends Error{}class h extends Error{constructor(e){super(),this.code="ENOENT",this.name="PageNotFoundError",this.message="Cannot find module for page: "+e}}class y extends Error{constructor(e,t){super(),this.message="Failed to load static file for page: "+e+" "+t}}class w extends Error{constructor(){super(),this.code="ENOENT",this.message="Cannot find the middleware module"}}function x(e){return JSON.stringify({message:e.message,stack:e.stack})}},4926:(e,t,r)=>{"use strict";r.a(e,async(e,n)=>{try{r.r(t),r.d(t,{default:()=>c});var o=r(997);r(7544);var i=r(6689),s=r(9648),a=r(9069),u=e([s,a]);[s,a]=u.then?(await u)():u;let c=function({Component:e,pageProps:t}){let[r,n]=(0,i.useState)(null),[s,a]=(0,i.useState)([]),[u,c]=(0,i.useState)(!1),[l,d]=(0,i.useState)(null);return(0,o.jsx)(e,{...t,token:r,galleries:s})};n()}catch(e){n(e)}})},9069:(e,t,r)=>{"use strict";r.a(e,async(e,n)=>{try{r.d(t,{M:()=>p,p:()=>g});var o=r(9648),i=r(4770),s=r.n(i),a=r(4802),u=r.n(a),c=e([o]);o=(c.then?(await c)():c)[0];let l="42931",d="https://da.xedis.net/auth/cb",f=()=>s().randomBytes(32).toString("hex"),p=e=>{let t=f(),r=`https://www.deviantart.com/oauth2/authorize?client_id=${l}&response_type=code&redirect_uri=${d}&scope=gallery+browse+publish&state=${t}`;e.setHeader("Set-Cookie",u().serialize("state",t,{httpOnly:!0,secure:!0,sameSite:"strict"})),e.redirect(r)},g=async(e,t,r,n)=>{let i=r.cookies.state;if(t!==i)throw Error("Invalid state");let{access_token:s,refresh_token:a}=(await o.default.post("https://www.deviantart.com/oauth2/token",new URLSearchParams({client_id:l,client_secret:"b552d76bbacac45e9e122edb48eb44c4",code:e,grant_type:"authorization_code",redirect_uri:d}),{headers:{"Content-Type":"application/x-www-form-urlencoded"}})).data;return n.setHeader("Set-Cookie",[u().serialize("access_token",s,{httpOnly:!0,secure:!0,sameSite:"strict"}),u().serialize("refresh_token",a,{httpOnly:!0,secure:!0,sameSite:"strict"})]),{access_token:s,refresh_token:a}};n()}catch(e){n(e)}})},4802:e=>{"use strict";e.exports=require("cookie")},6689:e=>{"use strict";e.exports=require("react")},997:e=>{"use strict";e.exports=require("react/jsx-runtime")},4770:e=>{"use strict";e.exports=require("crypto")},9648:e=>{"use strict";e.exports=import("axios")},167:(e,t)=>{"use strict";t._=function(e){return e&&e.__esModule?e:{default:e}}}};var t=require("../webpack-runtime.js");t.C(e);var r=t(t.s=4926);module.exports=r})();